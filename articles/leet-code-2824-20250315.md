---
title: "LeetCode 2824. Count Pairs Whose Sum is Less than Target"
emoji: "ğŸ–‹"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["leetcode", "go"]
published: false
---
## ã¯ã˜ã‚ã«
LeetCode ã€Œ2824. Count Pairs Whose Sum is Less than Targetã€ã®å•é¡Œã‚’Goã§è§£ãã¾ã—ãŸã€‚

## å•é¡Œ
https://leetcode.com/problems/count-pairs-whose-sum-is-less-than-target/description

### å•é¡Œæ–‡
Given a 0-indexed integer array `nums` of length `n` and an integer `target`, return the number of pairs `(i, j)` where `0 <= i < j < n` and `nums[i] + nums[j] < target`.


**å’Œè¨³**
é•·ã• `n` ã®ã‚¼ãƒ­ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®æ•´æ•°é…åˆ— `nums` ã¨æ•´æ•° `target` ãŒä¸ãˆã‚‰ã‚ŒãŸã¨ãã€`0 <= i < j < n` ã‹ã¤ `nums[i] + nums[j] < target` ã§ã‚ã‚‹ãƒšã‚¢ `(i, j)` ã®æ•°ã‚’è¿”ã™ã€‚

### ä¾‹
1.
```
Input: nums = [-1,1,2,3,1], target = 2
Output: 3
Explanation: There are 3 pairs of indices that satisfy the conditions in the statement:
- (0, 1) since 0 < 1 and nums[0] + nums[1] = 0 < target
- (0, 2) since 0 < 2 and nums[0] + nums[2] = 1 < target 
- (0, 4) since 0 < 4 and nums[0] + nums[4] = 0 < target
Note that (0, 3) is not counted since nums[0] + nums[3] is not strictly less than the target.
```

2.
```
Input: nums = [-6,2,5,-2,-7,-1,3], target = -2
Output: 10
Explanation: There are 10 pairs of indices that satisfy the conditions in the statement:
- (0, 1) since 0 < 1 and nums[0] + nums[1] = -4 < target
- (0, 3) since 0 < 3 and nums[0] + nums[3] = -8 < target
- (0, 4) since 0 < 4 and nums[0] + nums[4] = -13 < target
- (0, 5) since 0 < 5 and nums[0] + nums[5] = -7 < target
- (0, 6) since 0 < 6 and nums[0] + nums[6] = -3 < target
- (1, 4) since 1 < 4 and nums[1] + nums[4] = -5 < target
- (3, 4) since 3 < 4 and nums[3] + nums[4] = -9 < target
- (3, 5) since 3 < 5 and nums[3] + nums[5] = -3 < target
- (4, 5) since 4 < 5 and nums[4] + nums[5] = -8 < target
- (4, 6) since 4 < 6 and nums[4] + nums[6] = -4 < target
```

### åˆ¶ç´„
- 1 <= nums.length == n <= 50
- -50 <= nums[i], target <= 50

## è§£ç­”1
ã¾ãšã€ã‚·ãƒ³ãƒ—ãƒ«ãªæ–¹æ³•ã‚’è€ƒãˆã¾ã—ãŸã€‚
numsã®å…¨ã¦ã®çµ„ã¿åˆã‚ã›ã§åˆè¨ˆãŒtargetã‚ˆã‚Šã‚‚å°ã•ã„ã‚‚ã®ã‚’æ•°ãˆã¦ã„ãæ–¹æ³•ã§ã™ã€‚

### ã‚³ãƒ¼ãƒ‰
```go
func countPairs(nums []int, target int) int {
    count := 0

    for i := 0; i < len(nums)-1; i++ {
        for j := i + 1; j < len(nums); j++ {
            if nums[i] + nums[j] < target {
                count++
            }
        }
    }

    return count
}
```
å¤–å´ã®ãƒ«ãƒ¼ãƒ—ã§åŸºæº–ã¨ãªã‚‹indexã‚’å®šã‚ã€å†…å´ã®ãƒ«ãƒ¼ãƒ—ã§åŸºæº–ã¨ãªã‚‹indexã‚ˆã‚Šã‚‚å¾Œã‚ã®æ•°ã¨ã®çµ„ã¿åˆã‚ã›ã‚’ä½œã£ã¦ã„ãã¾ã™ã€‚
ä»¥ä¸‹ã®ã‚ˆã†ã«çµ„ã¿åˆã‚ã›ãŒä½œã‚‰ã‚Œã¾ã™ã€‚
- (0,1),(0,2)...
- (1,2),(1,3)...
- (2,3),(2,4)...

### è¨ˆç®—é‡
- æ™‚é–“çš„è¨ˆç®—é‡ï¼šO(nÂ²)
- ç©ºé–“çš„è¨ˆç®—é‡ï¼šO(1)

## è§£ç­”2
å…ˆã»ã©ã®ä¾‹ã¯ã€ã‚½ãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„å‰æã§ã®è§£ç­”ã§ã—ãŸãŒã€äº‹å‰ã«ã‚½ãƒ¼ãƒˆã—ã¦ã‹ã‚‰è§£ã‘ã°åˆ¥ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚‚ã§ããã†ã§ã™ã€‚
ä¾‹1ã®nums`[-1,1,2,3,1]`ã¯ã€ã‚½ãƒ¼ãƒˆã™ã‚‹ã¨`[-1,1,1,2,3]`ã¨ãªã‚Šã¾ã™ã€‚
ã“ã®æ™‚ã€ã‚½ãƒ¼ãƒˆå¾Œã®ã‚¹ãƒ©ã‚¤ã‚¹ã® `2`(nums[3])ã‚’ä¾‹ã«è€ƒãˆã‚‹ã¨ã€-1ã¨ã®çµ„ã¿åˆã‚ã›ã ã¨æ¡ä»¶ã‚’æº€ãŸã—ã¾ã™ãŒã€1ä»¥ä¸Šã®å ´åˆã¯å…¨ã¦æ¡ä»¶ã‚’æº€ãŸã—ã¾ã›ã‚“ã€‚
ã“ã®è¦–ç‚¹ã§è¦‹ã‚‹ã¨ã€ä¸è¦ãªçµ„ã¿åˆã‚ã›ã§ã®æ¯”è¼ƒã‚’æ¸›ã‚‰ã›ãã†ã§ã™ã€‚

### ã‚³ãƒ¼ãƒ‰
```go
func countPairs(nums []int, target int) int {
    slices.Sort(nums) // Go 1.21ä»¥å‰ã§ã¯ sort.Ints(nums) ã‚’ä½¿ç”¨ã™ã‚‹

    count := 0
    left, right := 0, len(nums)-1
    for left < right {
        if nums[left]+nums[right] < target {
            count += (right - left)
            left++
        } else {
            right--
        }
    }

    return count
}
```
Two Pointers ãƒ‘ã‚¿ãƒ¼ãƒ³ã§å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚
åŸºæœ¬çš„ãªTwo Pointers ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã¤ã„ã¦ã®è§£èª¬ã¯åˆ¥ã®å•é¡Œã®è¨˜äº‹ã§ç´¹ä»‹ã—ã¦ã„ã¾ã™ã®ã§ã€[å‚è€ƒ](#å‚è€ƒ)ã‚’ã”è¦§ãã ã•ã„ã€‚

å®Ÿè£…ã®æµã‚Œã‚’ä»¥ä¸‹ã§èª¬æ˜ã—ã¾ã™ã€‚
ä¾‹1ã®ã‚½ãƒ¼ãƒˆå¾Œã®ã‚¹ãƒ©ã‚¤ã‚¹`[-1,1,1,2,3]`ã‚’ä¾‹ã¨ã—ã¾ã™ã€‚
`left`ã¨`right`ã®åˆæœŸå€¤ã¯`(0, 4)`ã¨ãªã‚Šã¾ã™ã€‚
```
  [-1, 1, 1, 2, 3]
   â†‘            â†‘
 left(0)      right(4) 
```
`-1 + 3 = 2` ãªã®ã§ã€æ¡ä»¶ã‚’æº€ãŸã—ã¾ã›ã‚“ã€‚
ã“ã‚Œã¯ã€**3**ãŒå«ã¾ã‚Œã‚‹çµ„ã¿åˆã‚ã›ã®ä¸­ã§æœ€å°ã®çµ„ã¿åˆã‚ã›ãªã®ã§ã€**3**ã‚’å«ã‚€ä»–ã®çµ„ã¿åˆã‚ã›ã‚‚æ¡ä»¶ã‚’æº€ãŸã—ã¾ã›ã‚“ã€‚
ã“ã‚Œä»¥ä¸Šè€ƒæ…®ã™ã‚‹å¿…è¦ã¯ãªã„ã“ã¨ã‹ã‚‰`right--`ã§ãƒã‚¤ãƒ³ã‚¿ã‚’å‹•ã‹ã—ã¦ã„ã¾ã™ã€‚
æ¬¡ã¯`(0, 3)`ã¨ãªã‚Šã¾ã™ã€‚
```
  [-1, 1, 1, 2, 3]
   â†‘         â†‘
 left(0)  right(3) 
```
`-1 + 2 = 1`ãªã®ã§ã€æ¡ä»¶ã‚’æº€ãŸã—ã¾ã™ã€‚
ã‚¹ãƒ©ã‚¤ã‚¹ã¯ã‚½ãƒ¼ãƒˆæ¸ˆã¿ãªã®ã§ã€`(0, 3)`ãŒæ¡ä»¶ã‚’æº€ãŸã™ã¨ã„ã†ã“ã¨ã¯`(0, 2)`ã¨`(0, 1)`ã‚‚æ¡ä»¶ã‚’æº€ãŸã—ã¾ã™ã€‚
æ¡ä»¶ã‚’æº€ãŸã™æ•°ã¯`right - left`ã§è¨ˆç®—ã§ãã¾ã™ã€‚
ãã®å¾Œ`left`ã®ãƒã‚¤ãƒ³ã‚¿ã‚’ç§»å‹•ã—ã¦ã€åŒæ§˜ã®å‡¦ç†ã‚’ç¹°ã‚Šè¿”ã—ã¦ã„ãæµã‚Œã§ã™ã€‚

### è¨ˆç®—é‡
- æ™‚é–“çš„è¨ˆç®—é‡ï¼šO(n log n)
    - ã‚½ãƒ¼ãƒˆï¼šO(n log n)
    - Two Pointers: O(n)
- ç©ºé–“çš„è¨ˆç®—é‡ï¼šO(1)

## å‚è€ƒ
Two Pointers ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹åˆ¥ã®å•é¡Œã‚’ä»¥ä¸‹ã®è¨˜äº‹ã§ç´¹ä»‹ã—ã¦ã„ã¾ã™ã€‚
- [LeetCode 905. Sort Array By Parity](https://zenn.dev/shimpo/articles/leet-code-905-20250308)
- [LeetCode 2108. Find First Palindromic String in the Array](https://zenn.dev/shimpo/articles/leet-code-2108-20250309)