---
title: "LeetCode 347. Top K Frequent Elements (Python3)"
emoji: "ğŸ–‹"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["leetcode", "python"]
published: true
---
## ã¯ã˜ã‚ã«
LeetCode ã€Œ347. Top K Frequent Elementsã€ã®å•é¡Œã‚’ **Python3** ã§è§£ãã¾ã—ãŸã€‚

## å•é¡Œ
https://leetcode.com/problems/top-k-frequent-elements/description/

### å•é¡Œæ–‡
Given an integer array `nums` and an integer `k`, return the `k` most frequent elements. You may return the answer in any order.

**å’Œè¨³**
æ•´æ•°é…åˆ—`nums`ã¨æ•´æ•°`k`ãŒä¸ãˆã‚‰ã‚ŒãŸå ´åˆã€æœ€ã‚‚é »ç¹ã«å‡ºç¾ã™ã‚‹kå€‹ã®è¦ç´ ã‚’è¿”ã—ã¾ã™ã€‚è¿”ã•ã‚Œã‚‹é †åºã¯ä»»æ„ã§ã™ã€‚

### ä¾‹
1.
```
Input: nums = [1,1,1,2,2,3], k = 2

Output: [1,2]
```

2.
```
Input: nums = [1], k = 1

Output: [1]
```

3.
```
Input: nums = [1,2,1,2,1,2,3,1,3,2], k = 2

Output: [1,2]
```

### åˆ¶ç´„
- 1 <= nums.length <= 105
- -104 <= nums[i] <= 104
- k is in the range [1, the number of unique elements in the array].
- It is guaranteed that the answer is unique.


## è§£ç­”1
é…åˆ—ã®æ•´æ•°ã®æœ€ã‚‚é »ç¹ã«å‡ºç¾ã™ã‚‹è¦ç´ ã‚’æ±‚ã‚ã¾ã™ã€‚
é…åˆ—ã‚’ãƒ«ãƒ¼ãƒ—ã§å›ã—ãªãŒã‚‰ã€è¦ç´ ã‚’ã‚­ãƒ¼ã¨ã—ã¦å‡ºç¾å›æ•°ã‚’è¾æ›¸ã«ç™»éŒ²ã—ã¦ã„ãæ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™ãŒã€[collections.Counter](https://docs.python.org/ja/3/library/collections.html#counter-objects)ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ç°¡æ½”ã«å®Ÿè£…ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

### Counter
collectionsãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«å«ã¾ã‚Œã‚‹ã‚¯ãƒ©ã‚¹ã§ã€iterableãªãƒ‡ãƒ¼ã‚¿ã®å„è¦ç´ ã®å‡ºç¾å›æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
å†…éƒ¨çš„ã«ã¯è¾æ›¸`dict`ãŒä½¿ç”¨ã•ã‚Œã¦ãŠã‚Šã€è¦ç´ ãŒã‚­ãƒ¼ã€å‡ºç¾å›æ•°ãŒãƒãƒªãƒ¥ãƒ¼ã¨ã—ã¦ä¿æŒã—ã¦ã„ã¾ã™ã€‚

[most_common([n])](https://docs.python.org/ja/3/library/collections.html#collections.Counter.most_common)ãƒ¡ã‚½ãƒƒãƒ‰ãŒç”¨æ„ã•ã‚Œã¦ãŠã‚Šã€å¼•æ•°ã‚’æŒ‡å®šã™ã‚‹ã¨ã€æœ€ã‚‚å¤šã„nè¦ç´ ã‚’ã‚«ã‚¦ãƒ³ãƒˆãŒå¤šã„ã‚‚ã®ã‹ã‚‰é †ã«ä¸¦ã¹ãŸãƒªã‚¹ãƒˆã‚’è¿”ã—ã¾ã™ã€‚
ä»Šå›ã¯kå€‹åˆ†è¦ç´ ã‚’æ±‚ã‚ãŸã„ã®ã§kã‚’æŒ‡å®šã—ã¾ã™ã€‚

### ã‚³ãƒ¼ãƒ‰
```py
class Solution:
    def topKFrequent(self, nums: List[int], k: int) -> List[int]:
        return [num for num, _ in collections.Counter(nums).most_common(k)]
```

### è¨ˆç®—é‡
- æ™‚é–“çš„è¨ˆç®—é‡ï¼šO(n + m log m)
    - Counter(nums)ã®æ§‹ç¯‰ï¼šO(n)
        - å…¨ã¦ã‚’èµ°æŸ»ã™ã‚‹ã®ã§
    - most_common(k):O(m log m)
        - m = ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªè¦ç´ ã®æ•°
        - å…¨è¦ç´ ã®ã‚½ãƒ¼ãƒˆã‚’è¡Œã†
- ç©ºé–“çš„è¨ˆç®—é‡ï¼šO(m)
    - è¦ç´ ã”ã¨ã®ã‚«ã‚¦ãƒ³ãƒˆã‚’æ ¼ç´

kãŒå¤§ãã„ï¼ˆãƒ¦ãƒ‹ãƒ¼ã‚¯ãªè¦ç´ ã®ã»ã¨ã‚“ã©ã‚’å–ã‚‹ï¼‰å ´åˆã¯ã€è§£ç­”2ã‚ˆã‚Šã‚‚åŠ¹ç‡çš„ã§ã™ã€‚

## è§£ç­”2(heapq.nlargest)
[heapq.nlargest(n, iterable, key=None)](https://docs.python.org/ja/3/library/heapq.html#heapq.nlargest) ã‚’ä½¿ç”¨ã—ã¦å®Ÿè£…ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚
ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€iterableå¼•æ•°ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®ã†ã¡ã€æœ€å¤§å€¤ã‹ã‚‰é™é †ã«nå€‹ã®ãƒªã‚¹ãƒˆã‚’è¿”ã—ã¾ã™ã€‚

### ã‚³ãƒ¼ãƒ‰
```py
class Solution:
    def topKFrequent(self, nums: List[int], k: int) -> List[int]:
        counter = collections.Counter(nums)
        return [num for num, _ in heapq.nlargest(k, counter.items(), key=lambda x: x[1])]
```

### è¨ˆç®—é‡
- æ™‚é–“çš„è¨ˆç®—é‡ï¼šO(n + m log k)
    - Counter(nums)ã®æ§‹ç¯‰ï¼šO(n)
        - å…¨ã¦ã‚’èµ°æŸ»ã™ã‚‹ã®ã§
    - most_common(k):O(m log m)
        - m = ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªè¦ç´ ã®æ•°
        - kå€‹ã‚’ç¶­æŒã™ã‚‹ãƒ’ãƒ¼ãƒ—ã‚’ä½¿ã†
- ç©ºé–“çš„è¨ˆç®—é‡ï¼šO(m)
    - è¦ç´ ã”ã¨ã®ã‚«ã‚¦ãƒ³ãƒˆã‚’æ ¼ç´


kãŒå°ã•ã„å ´åˆã«ã¯è§£ç­”1ã‚ˆã‚Šã‚‚åŠ¹ç‡çš„ã§ã™ã€‚
