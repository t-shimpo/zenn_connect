---
title: "LeetCode 290. Word Pattern"
emoji: "ğŸ–‹"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["leetcode", "go"]
published: true
---
## ã¯ã˜ã‚ã«
LeetCode ã€Œ290. Word Patternã€ã®å•é¡Œã‚’Goã§è§£ãã¾ã—ãŸã€‚

## å•é¡Œ
https://leetcode.com/problems/word-pattern/description

### å•é¡Œæ–‡
Given a `pattern` and a string s, find if `s` follows the same `pattern`.

Here follow means a full match, such that there is a bijection between a letter in `pattern` and a non-empty word in s. Specifically:

- Each letter in `pattern` maps to exactly one unique word in s.
- Each unique word in `s` maps to exactly one letter in `pattern`.
- No two letters map to the same word, and no two words map to the same letter.

**å’Œè¨³**
`pattern`ã¨æ–‡å­—åˆ— `s` ãŒä¸ãˆã‚‰ã‚ŒãŸã¨ãã€`s` ãŒåŒã˜`pattern`ã«å¾“ã†ã‹ã©ã†ã‹ã‚’èª¿ã¹ã‚‹ã€‚

ã“ã“ã§ã€ç¶šãã¨ã¯å®Œå…¨ä¸€è‡´ã‚’æ„å‘³ã—ã€`pattern`ä¸­ã®æ–‡å­—ã¨ `s` ä¸­ã®ç©ºã§ãªã„å˜èªã¨ã®é–“ã«åŒå°„ãŒå­˜åœ¨ã™ã‚‹ã‚ˆã†ãªã‚‚ã®ã§ã‚ã‚‹ï¼š

- `pattern`å†…ã®å„æ–‡å­—ã¯ã€s å†…ã® 1 ã¤ã®ä¸€æ„ã®å˜èªã«æ­£ç¢ºã«ãƒãƒƒãƒ”ãƒ³ã‚°ã•ã‚Œã‚‹ã€‚
- `s` å†…ã®å„ä¸€æ„ã®å˜èªã¯ã€`pattern`å†…ã® 1 ã¤ã®æ–‡å­—ã«æ­£ç¢ºã«ãƒãƒƒãƒ”ãƒ³ã‚°ã•ã‚Œã¾ã™ã€‚
- 2ã¤ã®æ–‡å­—ãŒåŒã˜å˜èªã«ãƒãƒƒãƒ—ã•ã‚Œã‚‹ã“ã¨ã¯ãªãã€ã¾ãŸã€2ã¤ã®å˜èªãŒåŒã˜æ–‡å­—ã«ãƒãƒƒãƒ—ã•ã‚Œã‚‹ã“ã¨ã¯ãªã„ã€‚


### ä¾‹
1.
```
Input: pattern = "abba", s = "dog cat cat dog"

Output: true

Explanation:

The bijection can be established as:

ãƒ» 'a' maps to "dog".
ãƒ» 'b' maps to "cat".
```

2.
```
Input: pattern = "abba", s = "dog cat cat fish"

Output: false
```

3.
```
Input: pattern = "aaaa", s = "dog cat cat dog"

Output: false
```

### åˆ¶ç´„
- `1 <= pattern.length <= 300`
- `pattern` contains only lower-case English letters.
- `1 <= s.length <= 3000`
- `s` contains only lowercase English letters and spaces `' '`.
- `s` does not contain any leading or trailing spaces.
- All the words in `s` are separated by a single space.

## è§£ç­”1
æ–‡å­—åˆ—ãŒãƒ‘ã‚¿ãƒ¼ãƒ³ã¨åˆè‡´ã™ã‚‹ã‹ã‚’åˆ¤å®šã™ã‚‹å•é¡Œã§ã™ã€‚
ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å„æ–‡å­—ã«æ–‡å­—åˆ—å†…ã®ç‰¹å®šã®å˜èªãŒå¯¾å¿œã—ã¾ã™ã€‚

**å„æ–‡å­—(`a`ã‚„`b`)ã‚’ã‚­ãƒ¼ã€`s`ã®ä¸­ã®å˜èªã‚’ãƒãƒªãƒ¥ãƒ¼ã¨ã—ãŸãƒãƒƒãƒ—**ã€
**`s`ã®ä¸­ã®å˜èªã‚’ã‚­ãƒ¼ã€å„æ–‡å­—(`a`ã‚„`b`)ã‚’ãƒãƒªãƒ¥ãƒ¼ã¨ã—ãŸãƒãƒƒãƒ—** ã‚’ä½œæˆã™ã‚‹ã“ã¨ã§ã€
ãƒ‘ã‚¿ãƒ¼ãƒ³ã®åˆè‡´ã‚’æ¯”è¼ƒã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

### ã‚³ãƒ¼ãƒ‰
```go
func wordPattern(pattern string, s string) bool {
	words := strings.Split(s, " ")

	ptLen := len(pattern)
	wsLen := len(words)

	if ptLen != wsLen {
		return false
	}

	charMap := make(map[byte]string)
	wordMap := make(map[string]byte)

	for i := range ptLen {
		ch := pattern[i]
		w := words[i]

		word, cExist := charMap[ch]
		if cExist {
			if word != w {
				return false
			}
		}

		char, wExist := wordMap[w]
		if wExist {
			if char != ch {
				return false
			}
		}

		charMap[ch] = w
		wordMap[w] = ch
	}

	return true
}
```

#### è£œè¶³
`for i := range æ•°å€¤`ã¨ã„ã†æ›¸ãæ–¹ã¯ã€go1.22 ã‹ã‚‰å¯èƒ½ã§ã™ã€‚
ãã‚Œä»¥å‰ã®å ´åˆã¯ã€`for i := 0; i < æ•°å€¤; i++`ã¨ã„ã†å½¢ã§è¨˜è¿°ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
https://pkg.go.dev/golang.org/x/tools/gopls/internal/analysis/modernize#rangeint

### è¨ˆç®—é‡
- æ™‚é–“çš„è¨ˆç®—é‡ï¼šO(n)
- ç©ºé–“çš„è¨ˆç®—é‡ï¼šO(k)
  - k = ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªæ–‡å­— or å˜èªæ•°ã€‚åˆ¶ç´„ãŒ 300â€¯ä»¥å†…ãªã®ã§å®Ÿè³ªå®šæ•°

## è§£ç­”2
è§£ç­”1ã§ã¯æ–‡å­—ã¨å˜èªã‚’ãƒãƒƒãƒ”ãƒ³ã‚°ã—ã¾ã—ãŸãŒã€indexã‚’ãƒãƒªãƒ¥ãƒ¼ã¨ã—ãŸãƒãƒƒãƒ—ã‚’ä½œæˆã—ã¦æ¯”è¼ƒã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

### ã‚³ãƒ¼ãƒ‰
```go
func wordPattern(pattern string, s string) bool {
	words := strings.Split(s, " ")

	ptLen := len(pattern)
	wsLen := len(words)

	if ptLen != wsLen {
		return false
	}

	charMap := make(map[byte]int)
	wordMap := make(map[string]int)

	for i := range ptLen {
		ch := pattern[i]
		w := words[i]

		// ãã‚Œãã‚Œç›´è¿‘ã§å‡ºç¾ã—ãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ¯”è¼ƒ
		if charMap[ch] != wordMap[w] {
			return false
		}

		charMap[ch] = i + 1 // 0 ã¨åŒºåˆ¥ã™ã‚‹ãŸã‚ +1
		wordMap[w] = i + 1
	}

	return true
}
```

### è¨ˆç®—é‡
- æ™‚é–“çš„è¨ˆç®—é‡ï¼šO(n)
- ç©ºé–“çš„è¨ˆç®—é‡ï¼šO(k)
  - k = ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªæ–‡å­— or å˜èªæ•°ã€‚åˆ¶ç´„ãŒ 300â€¯ä»¥å†…ãªã®ã§å®Ÿè³ªå®šæ•°

## å‚è€ƒ
ä»Šå›ã®å•é¡Œã¨ä¼¼ã¦ã„ã‚‹å•é¡Œã‚‚ä»¥ä¸‹ã®è¨˜äº‹ã§ç´¹ä»‹ã—ã¦ã„ã¾ã™ã®ã§ã€å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚
- [LeetCode 383. Ransom Note](https://zenn.dev/shimpo/articles/leet-code-383-20250506)
- [LeetCode 205. Isomorphic Strings](https://zenn.dev/shimpo/articles/leet-code-205-20250511)
- [LeetCode 242. Valid Anagram](https://zenn.dev/shimpo/articles/leet-code-242-20250514)