---
title: "LeetCode 219. Contains Duplicate II"
emoji: "ğŸ–‹"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["leetcode", "go"]
published: false
---
## ã¯ã˜ã‚ã«
LeetCode ã€Œ219. Contains Duplicate IIã€ã®å•é¡Œã‚’Goã§è§£ãã¾ã—ãŸã€‚

## å•é¡Œ
https://leetcode.com/problems/contains-duplicate-ii/description/

### å•é¡Œæ–‡
Given an integer array `nums` and an integer `k`, return `true` if there are two distinct indices `i` and `j` in the array such that n`ums[i] == nums[j]` and `abs(i - j) <= k`.

**å’Œè¨³**
æ•´æ•°é…åˆ— `nums` ã¨æ•´æ•° `k` ãŒä¸ãˆã‚‰ã‚ŒãŸå ´åˆã€é…åˆ—å†…ã« `nums[i] == nums[j]` ã‹ã¤ `abs(i - j) <= k` ã¨ãªã‚‹ 2 ã¤ã®ç•°ãªã‚‹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ `i` ã¨ `j` ãŒå­˜åœ¨ã™ã‚‹å ´åˆã¯ `true` ã‚’è¿”ã—ã¾ã™ã€‚


### ä¾‹
1.
```
Input: nums = [1,2,3,1], k = 3
Output: true
```

2.
```
Input: nums = [1,0,1,1], k = 1
Output: true
```

3.
```
Input: nums = [1,2,3,1,2,3], k = 2
Output: false
```

### åˆ¶ç´„
- 1 <= nums.length <= 105
- -109 <= nums[i] <= 109
- 0 <= k <= 105

## è§£ç­”1ï¼ˆHashMapï¼‰
é‡è¤‡ã™ã‚‹å€¤ã‚’ç™ºè¦‹ã—ã€ãã‚Œãã‚Œã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å·®ãŒkä»¥å†…ã§ã‚ã‚Œã°trueã‚’è¿”ã™å•é¡Œã§ã™ã€‚
`nums` ã‚’èµ°æŸ»ã—ãªãŒã‚‰ã€å„å€¤ã®æœ€æ–°ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’è¨˜éŒ²ã™ã‚Œã°ã€1å›ã®ãƒ«ãƒ¼ãƒ—ã§è§£ã‘ã¾ã™ã€‚

### ã‚³ãƒ¼ãƒ‰
```go
func containsNearbyDuplicate(nums []int, k int) bool {
    // i != j ã¨ã„ã†æ¡ä»¶ã‚’æº€ãŸã›ãªã„ãŸã‚ã€å¸¸ã« false
    if k == 0 {
        return false
    }

    lastSeenIndex := make(map[int]int)

    for i, v := range nums {
        index, exist := lastSeenIndex[v]
        if exist && (i - index) <= k {
            return true
        }
        lastSeenIndex[v] = i
    }

    return false
}
```
`lastSeenIndex`ã¯`nums`ã®å€¤ã‚’ã‚­ãƒ¼ã¨ã—ã¦ã€indexã‚’ãƒãƒªãƒ¥ãƒ¼ã¨ã—ã¦è¨˜éŒ²ã—ã¾ã™ã€‚
`exist`ã§ã‚­ãƒ¼ã®å­˜åœ¨ã‚’åˆ¤å®šã—ã€å­˜åœ¨ã—ã¦ã„ã‚‹å ´åˆã€å·®ãŒkä»¥å†…ã§ã‚ã‚Œã°trueã‚’è¿”ã—ã¦ã„ã¾ã™ã€‚
ãã‚Œä»¥å¤–ã®å ´åˆã¯ã€ã‚­ãƒ¼ã«å¯¾ã™ã‚‹ãƒãƒªãƒ¥ãƒ¼ã‚’æ›´æ–°ã—ã¦ã„ã¾ã™ã€‚

### è¨ˆç®—é‡
- æ™‚é–“çš„è¨ˆç®—é‡ï¼šO(n)
- ç©ºé–“çš„è¨ˆç®—é‡ï¼šO(n)

## è§£ç­”2ï¼ˆã‚¹ãƒ©ã‚¤ãƒ‡ã‚£ãƒ³ã‚°ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ï¼‰
åˆ¥ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚‚ã‚ã£ãŸã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚
ã‚¹ãƒ©ã‚¤ãƒ‡ã‚£ãƒ³ã‚°ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ç”¨ã„ãŸæ–¹æ³•ã§ã™ã€‚

### ã‚³ãƒ¼ãƒ‰
```go
func containsNearbyDuplicate(nums []int, k int) bool {
    // i != j ã¨ã„ã†æ¡ä»¶ã‚’æº€ãŸã›ãªã„ãŸã‚ã€å¸¸ã« false
    if k == 0 {
        return false
    }

    numSet := make(map[int]struct{})

    for i, v := range nums {
        if _, exist := numSet[v]; exist {
            return true
        }
        numSet[v] = struct{}{}

        if len(numSet) > k {
            delete(numSet, nums[i-k])
        }
    }

    return false
}
```
`numSet := map[int]struct{}`ã§è¦ç´ ã®å­˜åœ¨ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚
`numSet`ã‚’ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã¨ã—ã¦ ã¯é•·ã• `k + 1` ã¾ã§ä¿æŒã—ã€ãã‚Œã‚’è¶…ãˆãŸã‚‰å¤ã„è¦ç´ ã‚’å‰Šé™¤ã—ã¾ã™ã€‚
ã“ã‚Œã¯ã€ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦å†…ã®è¦ç´ ãŒ k ä»¥å†…ã®ç¯„å›²ã«åã¾ã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã§ã™ã€‚
ã“ã®æ–¹æ³•ã§ã¯ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¯è¨˜éŒ²ã›ãšã¨ã‚‚åˆ¤å®šã§ãã¾ã™ã€‚

### è¨ˆç®—é‡
- æ™‚é–“çš„è¨ˆç®—é‡ï¼šO(n)
- ç©ºé–“çš„è¨ˆç®—é‡ï¼šO(k)

`numSet` ã®ã‚µã‚¤ã‚ºã¯æœ€å¤§ã§ k å€‹ã¾ã§ã—ã‹å¢—ãˆãªã„ãŸã‚ã€æœ€æ‚ªã§ã‚‚ O(k) ã®ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã«åã¾ã‚Šã¾ã™ã€‚
ä¸€æ–¹ã€HashMap ã‚’ä½¿ã†æ–¹æ³•ã§ã¯ã€è¦ç´ ã”ã¨ã«1å›ä¿å­˜ã™ã‚‹ã®ã§ã€æœ€æ‚ªã®å ´åˆ O(n) ã®ç©ºé–“ã‚’ä½¿ã†ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

### å‚è€ƒ
ã‚¹ãƒ©ã‚¤ãƒ‡ã‚£ãƒ³ã‚°ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ä½¿ç”¨ã™ã‚‹åˆ¥ã®å•é¡Œã‚’ä»¥ä¸‹ã®è¨˜äº‹ã§ç´¹ä»‹ã—ã¦ã„ã¾ã™ã€‚
- [LeetCode 1652. Defuse the Bomb](https://zenn.dev/shimpo/articles/leet-code-1652-20250321)